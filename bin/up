#!/bin/bash

set -e

if test "$(uname)" = "Linux"
then
  if test "$(which apt-get)"
  then
    echo "› updating apt-get"
    sudo apt-get update
    sudo apt-get dist-upgrade
  elif test "$(which dnf)"
  then
    echo "› updating dnf"
    sudo dnf update
  fi
fi

if test "$(which brew)"
then
  echo "› updating brew"
  brew update
  brew upgrade --all
  brew cleanup --force
fi

if test "$(which fzf)"
then
  echo "› updating fzf"
  if test "$(git -C ~/.fzf pull)" != "Already up-to-date."
  then
    cd ~/.fzf/install
  fi
fi

if test -d ~/.tmux/plugins/tpm
then
  echo "› updating tpm"
  git -C ~/.tmux/plugins/tpm pull
  ~/.tmux/plugins/tpm/bin/update_plugins all
fi

if test "$(which antigen)"
then
  echo "› updating antigen"
  antigen update
  antigen selfupdate
  antigen cleanup
fi

if test "$(which apm)"
then
  echo "› updating apm"
  apm upgrade -c false
fi
