#!/bin/bash

if test "$(uname)" = "Linux"
then
  if test "$(which apt-get)"
  then
    echo "› updating apt-get"
    sudo apt-get update
    sudo apt-get dist-upgrade
    echo
  elif test "$(which dnf)"
  then
    echo "› updating dnf"
    sudo dnf update
    echo
  fi
fi

if test "$(which brew)"
then
  echo "› updating brew"
  brew update
  brew upgrade --all
  brew cleanup --force
  brew cask cleanup
  echo
fi

if test "$(which fzf)"
then
  echo "› updating fzf"
  if test "$(git -C ~/.fzf pull)" != "Already up-to-date."
  then
    ~/.fzf/install --all --no-update-rc
  fi
  echo
fi

if test -d ~/.tmux/plugins/tpm
then
  echo "› updating tpm"
  git -C ~/.tmux/plugins/tpm pull
  ~/.tmux/plugins/tpm/bin/update_plugins all
  echo
fi

if test "$(which zplug)"
then
  echo "› updating zplug"
  zplug update
  zplug update --self
  zplug clean --force
  zplug clear --force
  zplug load
  echo
fi

if test "$(which apm)"
then
  echo "› updating apm"
  apm upgrade -c false
  echo
fi
