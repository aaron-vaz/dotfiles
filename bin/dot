#!/bin/sh
#
# dot
#
# `dot` handles installation, updates, things like that. Run it periodically
# to make sure you're on the latest and greatest.
export ZSH=$HOME/.dotfiles

if test "$(uname)" = "Darwin"
then
  # Set OS X defaults
  $ZSH/osx/set-defaults.sh

  # Install homebrew
  if test ! $(which brew)
  then
    ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
  fi

  # Upgrade homebrew
  echo "› brew update"
  brew update

  # Run Homebrew through the Brewfile
  echo "› brew bundle"
  brew bundle check --file=$ZSH/Brewfile
  brew bundle --file=$ZSH/Brewfile
elif test "$(uname)" = "Linux"
then
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/linuxbrew/go/install)"
fi

# Install software
echo "› $ZSH/script/install"
$ZSH/script/install
